
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Automated scenario comparison &#8212; PyDSS 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Sample “Scenario_settings.toml” file" href="Sample TOML files.html" />
    <link rel="prev" title="The socket interface" href="interfaces.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Sample TOML files.html" title="Sample “Scenario_settings.toml” file"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="interfaces.html" title="The socket interface"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyDSS 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="automated-scenario-comparison">
<h1>Automated scenario comparison<a class="headerlink" href="#automated-scenario-comparison" title="Permalink to this headline">¶</a></h1>
<p>PyDSS enables users to automatically generate high quality plots using the exported simulation resuts. Users both both generate plots for an induvisual scenario or generate plots to compare multiple scenarios. It is important to note that to run to generate these plot users need to define a visualization toml file
‘Generate_visuals’ should be set to true to enable the feature. Additionally any plot the user requires should also be set to true. A example has been provided on how to setup the comparison feature and can found at ~\PyDSS\examples\Custom_controls_example\PyDSS Scenarios. ‘automated_comparison.toml’ file contains contains the visualization settings</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Simulations</span><span class="p">]</span>
        <span class="n">Run_simulations</span> <span class="o">=</span> <span class="n">true</span>
        <span class="n">Generate_visuals</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">Run_bokeh_server</span> <span class="o">=</span> <span class="n">false</span>
<span class="p">[</span><span class="n">Plots</span><span class="p">]</span>
        <span class="n">Frequency_sweep</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">XFMR_tap</span> <span class="o">=</span> <span class="n">true</span>
        <span class="n">Voltage_sag</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">Voltage</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">Loading</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">Voltage_Loading</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">Voltage_profiles</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">Load</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">Generation</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">Load_Generation</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">Curtailment</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">Voltage_imbalance</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">Feeder_power</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">Feeder_line_losses</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">Feeder_losses</span> <span class="o">=</span> <span class="n">false</span>
        <span class="n">Feeder_substation_losses</span> <span class="o">=</span> <span class="n">false</span>
<span class="p">[</span><span class="n">Visualization</span><span class="p">]</span>
        <span class="n">Plotting_mode</span> <span class="o">=</span><span class="s2">&quot;Separate&quot;</span>
        <span class="n">FileType</span> <span class="o">=</span> <span class="s1">&#39;png&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Simulations.Run_simulations [bool] -  If ‘false’, the simulatiosn will not run the simulation or not.</p></li>
<li><p>Simulations.Generate_visuals [bool] - If ‘false’, plots will not be generated. Will generate plots if set to ‘true’, even is ‘Run_simulations’ is set to false using results exported from previos simulations. If files required are not available, an assertion error will be raised.</p></li>
<li><p>Plots [dict] - Within the plots dicionary, all plots user required to be generated can be set to ‘true’. If files required are not available, an assertion error will be raised.</p></li>
<li><p>Visualization.Plotting_mode [string] - Possible values are  [‘Single’, ‘Separate’]. Allows user to either generate seperate plots or comparative plots.</p></li>
<li><p>Visualization.FileType [string] - Possible values are  [‘png’, ‘pdf’]. Allows user export plots in multiple formats.</p></li>
</ul>
<p>Once the visualization file has been correclty configured, the simulations canbe run using the following code.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--pydss_path&#39;</span><span class="p">,</span>
                          <span class="n">default</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;C:\Users\alatif\Desktop\PyDSS&#39;</span><span class="p">)</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--sim_path&#39;</span><span class="p">,</span>
                          <span class="n">default</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;C:\Users\alatif\Desktop\PyDSS\examples\External_interfacing_example\pyDSS_project\PyDSS Scenarios&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">run_pyDSS</span><span class="p">(</span><span class="n">pydss_path</span><span class="p">,</span> <span class="n">sim_path</span><span class="p">):</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pydss_path</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pydss_path</span><span class="p">,</span> <span class="s1">&#39;PyDSS&#39;</span><span class="p">))</span>
        <span class="kn">from</span> <span class="nn">pyDSS</span> <span class="kn">import</span> <span class="n">instance</span> <span class="k">as</span> <span class="n">dssInstance</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">dssInstance</span><span class="p">()</span> <span class="c1"># Create an instance of PyDSS</span>
        <span class="c1"># the run command takes in list of scenrio TOML files and visualization TOML file as function inputs</span>
        <span class="n">a</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;~</span><span class="se">\\</span><span class="s1">PyDSS</span><span class="se">\\</span><span class="s1">examples</span><span class="se">\\</span><span class="s1">Custom_controls_example</span><span class="se">\\</span><span class="s1">PyDSS Scenarios</span><span class="se">\\</span><span class="s1">base_case.toml&#39;</span><span class="p">,</span>
                <span class="s1">&#39;~</span><span class="se">\\</span><span class="s1">PyDSS\examples</span><span class="se">\\</span><span class="s1">Custom_controls_example</span><span class="se">\\</span><span class="s1">PyDSS Scenarios</span><span class="se">\\</span><span class="s1">self_consumption.toml&#39;</span><span class="p">,</span>
                <span class="s1">&#39;~</span><span class="se">\\</span><span class="s1">PyDSS</span><span class="se">\\</span><span class="s1">examples</span><span class="se">\\</span><span class="s1">Custom_controls_example</span><span class="se">\\</span><span class="s1">PyDSS Scenarios</span><span class="se">\\</span><span class="s1">volt_var.toml&#39;</span><span class="p">,</span>
                <span class="s1">&#39;~</span><span class="se">\\</span><span class="s1">PyDSS\examples</span><span class="se">\\</span><span class="s1">Custom_controls_example</span><span class="se">\\</span><span class="s1">PyDSS Scenarios</span><span class="se">\\</span><span class="s1">multiple_controllers.toml&#39;</span><span class="p">],</span>
        <span class="s1">&#39;~</span><span class="se">\\</span><span class="s1">PyDSS</span><span class="se">\\</span><span class="s1">examples</span><span class="se">\\</span><span class="s1">Custom_controls_example</span><span class="se">\\</span><span class="s1">PyDSS Scenarios</span><span class="se">\\</span><span class="s1">automated_comparison.toml&#39;</span>
        <span class="p">)</span> <span class="c1">#Run the simulation</span>

<span class="n">run_pyDSS</span><span class="p">()</span>
</pre></div>
</div>
<p>Loading vs Voltage KDE plot for all transformer (for a QSTS simulation)</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/voltage-loading.png"><img alt="_images/voltage-loading.png" src="_images/voltage-loading.png" style="width: 420.0px; height: 420.0px;" /></a>
</div>
<p>User have also been provided the option to change plot settiings using the same TOML file. As an example dictionaty for the plot above is shown below. To generate the plot, ‘Generate_visuals’ was set to ture and ‘Plotting_mode’ was set to ‘Single’.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Visualization</span><span class="o">.</span><span class="n">Voltage_Loading_settings</span><span class="p">]</span>
        <span class="n">Height</span> <span class="o">=</span> <span class="mi">7</span>
        <span class="n">DPI</span> <span class="o">=</span> <span class="mi">200</span>
        <span class="n">Display_limits</span> <span class="o">=</span> <span class="n">true</span>
        <span class="n">Alpha</span> <span class="o">=</span> <span class="mf">0.05</span>
        <span class="n">Legend_font_size</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="n">Frequency</span> <span class="o">=</span> <span class="mf">60.0</span>
        <span class="n">Simulation_mode</span> <span class="o">=</span> <span class="s2">&quot;Yearly&quot;</span>
        <span class="n">Grid</span> <span class="o">=</span> <span class="n">true</span>
        <span class="c1"># kind - str - possible options &#39;scatter&#39;, &#39;reg&#39;, &#39;resid&#39;, &#39;kde&#39;, &#39;hex&#39;</span>
        <span class="n">Kind</span> <span class="o">=</span> <span class="s2">&quot;kde&quot;</span>
        <span class="c1"># Class - str - possible options &#39;Lines&#39;, &#39;Transformers&#39;</span>
        <span class="n">Class</span> <span class="o">=</span> <span class="s2">&quot;Transformers&quot;</span>
</pre></div>
</div>
<p>The plot shows the impact of running storage in self consumption on voltage at the PCC.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/Voltage-pdf.png"><img alt="_images/Voltage-pdf.png" src="_images/Voltage-pdf.png" style="width: 480.0px; height: 320.0px;" /></a>
</div>
<p>The plots hilghts various voltage regions. Users are able to change the defaults settings using  the TOML file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Visualization</span><span class="o">.</span><span class="n">Voltage_settings</span><span class="p">]</span>
        <span class="n">Height</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="n">Width</span> <span class="o">=</span> <span class="mi">6</span>
        <span class="n">DPI</span> <span class="o">=</span> <span class="mi">200</span>
        <span class="n">Grid</span> <span class="o">=</span> <span class="n">true</span>
        <span class="n">Line_width</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">Line_alpha</span> <span class="o">=</span> <span class="mf">0.2</span>
        <span class="n">Fill_alpha</span> <span class="o">=</span> <span class="mf">0.2</span>
        <span class="n">Frequency</span> <span class="o">=</span> <span class="mf">60.0</span>
        <span class="n">Legend_font_size</span> <span class="o">=</span> <span class="mi">6</span>
        <span class="n">Simulation_mode</span> <span class="o">=</span> <span class="s2">&quot;Yearly&quot;</span>
        <span class="n">Color_template</span> <span class="o">=</span> <span class="s2">&quot;Blues&quot;</span>
        <span class="n">Show_operation_regions</span> <span class="o">=</span> <span class="n">true</span>
        <span class="n">Y_ranges</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.90</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">,</span> <span class="mf">1.05</span><span class="p">,</span> <span class="mf">1.10</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">]</span>
        <span class="n">Y_range_labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;UV trip region&quot;</span><span class="p">,</span> <span class="s2">&quot;UV Voltage control region&quot;</span><span class="p">,</span> <span class="s2">&quot;Normal operation region&quot;</span><span class="p">,</span> <span class="s2">&quot;OV Voltage control region&quot;</span><span class="p">,</span> <span class="s2">&quot;OV trip region&quot;</span><span class="p">]</span>
        <span class="n">Y_range_colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="s2">&quot;yellow&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;darkblue&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="interfaces.html"
                        title="previous chapter">The socket interface</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Sample TOML files.html"
                        title="next chapter">Sample “Scenario_settings.toml” file</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/Automated comparison of scenarios.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Sample TOML files.html" title="Sample “Scenario_settings.toml” file"
             >next</a> |</li>
        <li class="right" >
          <a href="interfaces.html" title="The socket interface"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PyDSS 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Aadil Latif.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.
    </div>
  </body>
</html>